import ModuleLoader from '../../loaders/module';

var assert = require("assert")

describe('Module Loader', function(){

	var Loader;
	var fileLocation = "../test/mock/controllers/test.controller.js";

	beforeEach(function(done) {
	    Loader = new ModuleLoader();
		Loader.loadModule('TestController', fileLocation);

		done();
	});

	describe('#construct', function(){
		it('store contains a module package named TestController', function(){
			var expected = 'TestController';
			assert.equal(expected, Loader.modules[0].name);
		})
	})

	describe('#resolve', function(){
		it('can resolve module from store', function(){

			var expected = 5;

			var TestController = Loader.resolve('TestController');
			var Controller = new TestController();

			assert.equal(expected, Controller.test());
		})
	})
})
